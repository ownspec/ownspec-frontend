<main-header>
  <div class="main-header-title">Write {{component.title}}</div>
  <div class="main-header-content" style="display: flex">
    <div style="max-width: 280px; font-size: 1rem;padding-right: 5px" *ngIf="saved != null">
      {{saved ? 'All changes saved' : 'Save pending...'}}
      <button (click)="autoSave()" md-raised-button color="primary" *ngIf="!saved">
        <i class="fa fa-save" aria-hidden="true"></i> Save
      </button>
    </div>
    <button uiSref="^" md-raised-button color="warn">
      <i class="fa fa-ban" aria-hidden="true"></i> Close
    </button>
  </div>
</main-header>


<div class="main-content-content" style="display: flex;flex-direction: row" *ngIf="component != null">
  <div style="flex: 1">
      <ckeditor
        [(ngModel)]="content"
        [config]="{uiColor: '#99000', height: '200px', basePath: '/assets/js/ckeditor/'}"
        (change)="onChange($event)"
        [readonly]="!component.currentStatus.isEditable"
        (ready)="onReady($event)">
      </ckeditor>
  </div>

  <div style="display:flex;flex-direction:row;width: 400px;height: 100%;padding-left: 10px">
    <tabset class="component-write-tabs">
      <tab heading="Components" customClass="foobar">
        <components-selection [component]="component"></components-selection>
      </tab>

      <tab heading="Workflow">
       <workflow [component]="component" [canUpdateWorkflow]="saved" (update)="onWorkflowChange($event)"></workflow>
      </tab>

      <tab heading="Comments">
       <comments [component]="component" (update)="onWorkflowChange($event)"></comments>
      </tab>
    </tabset>

  </div>

</div>
