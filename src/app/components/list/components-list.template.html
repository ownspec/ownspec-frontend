<main-header>
  <div class="main-header-title">Components</div>
  <div class="main-header-content" style="display: flex">
    <div class="main-search-container" style="width:280px">
      <form class="main-search" (submit)="search()">
        <div class="main-search-input-wrapper">
          <md-input placeholder="Search components..." [(ngModel)]="searchBean.query" name="query"></md-input>
        </div>
      </form>
    </div>

    <div class="rounded-button">
      <button (click)="startCreateComponent()"><i class="fa fa-plus" aria-hidden="true"></i></button>
    </div>
  </div>
</main-header>


<div class="main-content-content">
  <ngx-datatable
      class="material" style="flex: 1"
      [rows]="components"
      [columnMode]="'flex'"
      [headerHeight]="50"
      [footerHeight]="0"
      [rowHeight]="50"
      [scrollbarV]="true"
      [scrollbarH]="true">
    <ngx-datatable-column [flexGrow]="1" name="Id"></ngx-datatable-column>
    <ngx-datatable-column [flexGrow]="1" name="Version" prop="currentWorkflowInstance.version">

    </ngx-datatable-column>
    <ngx-datatable-column [flexGrow]="4" name="Title"></ngx-datatable-column>
    <ngx-datatable-column [flexGrow]="2" name="Status" prop="currentWorkflowInstance.currentWorkflowStatus.status.name"></ngx-datatable-column>
    <ngx-datatable-column [flexGrow]="2" name="Creation">
      <template let-row="row" let-value="value" ngx-datatable-cell-template>
        {{row.creationDate | amTimeAgo}}
      </template>
    </ngx-datatable-column>
    <ngx-datatable-column [flexGrow]="2" name="Update">
      <template let-row="row" let-value="value" ngx-datatable-cell-template>
        {{row.currentWorkflowInstance.currentWorkflowStatus.createdDate | amTimeAgo}}
      </template>
    </ngx-datatable-column>
    <ngx-datatable-column [flexGrow]="2" name="Action">
      <template let-row="row" let-value="value" ngx-datatable-cell-template>
        <div class="table-actions">


          <button type="button" class="btn btn-outline-primary btn-tiny" uiSref=".component-edit"
             [uiParams]="{ componentId: row.id }"
             (click)="addVisit(row.id)"
             md-tooltip="Edit component">
            <i class="fa fa-pencil" aria-hidden="true"></i>
          </button>
          <button type="button" class="btn btn-outline-primary btn-tiny"  uiSref=".component-write"
             [uiParams]="{ componentId: row.id }"
             (click)="addVisit(row.id)"
             md-tooltip="Open component for write">
            <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
          </button>
          <button type="button" class="btn btn-secondary btn-tiny"  (click)="print(row)" md-tooltip="Print">
            <i class="fa fa-print" aria-hidden="true"></i>
          </button>
          <button type="button" class="btn btn-outline-danger btn-tiny" tooltipPlacement="bottom" md-tooltip="Delete component" tooltip-position="above" tooltipClass="foobar">
            <i class="fa fa-trash" aria-hidden="true"></i>
          </button>
        </div>
      </template>
    </ngx-datatable-column>
  </ngx-datatable>
</div>
