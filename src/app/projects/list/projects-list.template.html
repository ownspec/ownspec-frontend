<main-header>
  <div class="main-header-title">Projects</div>
  <div class="main-header-content" style="display: flex">
    <div>
      <button md-mini-fab (click)="linkService.gotoProjectEditor('_new')"><i class="fa fa-plus" aria-hidden="true"></i></button>
    </div>
  </div>
</main-header>

<div style="overflow: auto;height: 100%">
  <div *ngIf="projects.length == 0"
       fxLayout="column"
       fxLayoutAlign="center center">
    <h5>Sorry... No results found</h5>
    <img src="assets/img/sad-face.png">
  </div>
  <div fxLayout="row" fxLayoutWrap style="overflow: auto;width: 100%;">
    <div *ngFor="let project of projects" fxFlex="25" fxFlex.md="33" fxFlex.sm="50" fxFlex.xs="100" style="padding: 5px; ">
      <md-card fxLayout="column" style="height: 100%;">
        <md-card-header>
          <!-- TODO: style fix until https://github.com/angular/material2/issues/3131 is released -->
          <img md-card-avatar src="assets/img/no-picture-icon.png" style="width: 40px; height: 40px">
          <md-card-title>
            <a (click)="show(project.id)" role="button">
              <h5>{{project.title}} <span style="font-weight: 400;font-size: 1rem;">({{project.key}})</span></h5>
            </a>
          </md-card-title>
          <md-card-subtitle>
            <h6 style="font-size: 0.9rem;">Created {{project.createdDate | amTimeAgo }}</h6>
          </md-card-subtitle>
        </md-card-header>
        <md-card-content fxFlex>
          <p>{{project.description}}</p>
        </md-card-content>
        <md-card-actions fxLayout="row" fxLayoutAlign="start end">
          <button md-button (click)="edit(project)">
            <i class="fa fa-pencil" aria-hidden="true"></i> EDIT
          </button>
          <button md-button (click)="toggleFavorite(project)">
            <i [ngClass]="{'fa fa-star favorite': project.isFavorite, 'fa fa-star-o': !project.isFavorite}"
               aria-hidden="true"></i> FAVORITE
          </button>
        </md-card-actions>
      </md-card>
    </div>
  </div>
</div>
